# Текстовый архиватор

## Техническая информация о способах сжатия текста

### Общие принципы сжатия данных

Сжатие данных — это процесс уменьшения объема данных за счет удаления избыточности или сокращения их представления. Основные цели сжатия включают:

1. **Экономию дискового пространства** — сжатые данные занимают меньше места на носителях.
2. **Скорость передачи данных** — уменьшенный объем данных быстрее передается по сетям.

Сжатие делится на два основных типа: **с потерями** и **без потерь**. В случае текстовых данных чаще всего используется сжатие **без потерь**, поскольку восстановление исходного текста должно быть точным.

### Словарные методы сжатия

Одним из наиболее эффективных подходов к сжатию данных являются **словари**. Словарное сжатие базируется на следующей идее:

- **Повторяющиеся последовательности символов** заменяются на короткие кодовые слова, которые хранятся в словаре.
- При сжатии анализируются фрагменты данных и наиболее часто встречающиеся фрагменты заносятся в словарь.
- После этого исходные данные заменяются на соответствующие кодовые слова из словаря.

#### Примеры словарных методов

**1. Алгоритм LZ77/LZ78**

LZ77 и LZ78 — это два первых алгоритма, основанных на словарном подходе. В LZ77 словарь динамически обновляется по мере поступления новых данных, а в LZ78 данные кодируются на основе уже сформированных словарных записей. Оба алгоритма нашли широкое применение в различных форматах сжатия, таких как ZIP и PNG.

**2. Алгоритм LZW (Lempel-Ziv-Welch)**

LZW — это усовершенствованная версия LZ78, которая добавляет в словарь новые фрагменты по мере анализа данных. Этот алгоритм используется в форматах GIF и TIFF. Преимущество LZW в его простоте и эффективности при работе с текстами, содержащими повторяющиеся паттерны.

**3. Алгоритм DEFLATE**

DEFLATE комбинирует методы словарного сжатия и кодирования Хаффмана. Вначале текст сжимается методом LZ77, а затем оставшаяся избыточность кодируется с помощью алгоритма Хаффмана. Этот алгоритм используется в таких широко известных форматах, как ZIP и GZIP.

### Преимущества и ограничения словарных методов

**Преимущества:**

- Высокая степень сжатия для данных с повторяющимися фрагментами.
- Простой и эффективный алгоритм сжатия и распаковки.
- Широкая применимость, от текстовых до бинарных данных.

**Ограничения:**

- Эффективность зависит от структуры данных: для случайных данных степень сжатия будет низкой.
- В некоторых реализациях требуется значительное количество памяти для хранения словаря.
- В редких случаях возможны коллизии (конфликты) при нахождении похожих фрагментов данных.

Использование словарных методов сжатия в данной программе позволяет достичь высокого уровня сжатия текстовых файлов, что делает её особенно эффективной при работе с большими объемами повторяющихся данных.

## Описание проекта

Данная программа представляет собой реализацию алгоритмов сжатия и распаковки текстовых файлов. Используемые методы позволяют достичь значительного уменьшения размера исходных данных. В среднем, сжатие происходит в 8 раз и более, что позволяет, например, уменьшить текстовый файл с 1 МБ до 150 КБ.

## Пример использования

Программа поддерживает следующие команды:

```bash
Usage:
  -p, --pack <filename.txt> [archive_name.dat]            Compress the specified file.
  -u, --unpack <archive_name.dat> [output_filename.txt]   Decompress the specified archive.
  --help                                                  Show this help message.
```

Пример сжатия файла:
```bash
./CompressionProject -p "../old_file.txt" "../encode.dat"
```

Пример распаковки файла:
```bash
./CompressionProject -u "../encode.dat" "../new_file.txt"
```

## Алгоритмы сжатия

Программа использует гибридный подход к сжатию данных, комбинируя идеи из различных методов, таких как адаптивное кодирование и использование словарей.

### 1. Словарное кодирование

Основной алгоритм сжатия базируется на словарном методе. В ходе работы программа строит словарь часто встречающихся последовательностей символов. Этот подход позволяет значительно уменьшить объем данных за счет замены длинных последовательностей на более короткие кодовые слова.

### 2. Оптимизация сжатия

Для достижения высокого уровня сжатия используются два этапа:

- **Первичный этап (Compress1)**: На первом этапе строится словарь и заменяются исходные данные на их словарные представления. Это наиболее ресурсоемкий процесс, но он обеспечивает существенное сокращение размера данных.

  Пример кода из `compress.c`:
  ```c
  int *Compress1(const char filename[], int *index) {
    // Кодирование файла с использованием словаря
    // ...
  }
  ```

- **Анализ и вторичное сжатие (Compress2)**: Второй этап включает в себя анализ полученного на первом этапе сжатого потока данных и его дополнительное сжатие. Это позволяет добиться еще большего сжатия.

  Пример кода из `compress.c`:
  ```c
  void Compress2(const char filename[], int size_enc, int enc[]) {
    // Вторичный этап компрессии
    // ...
  }
  ```

### 3. Распаковка данных

Процесс распаковки данных также проходит в два этапа, которые являются обратными к этапам сжатия. На первом этапе происходит восстановление данных на основе словаря, а на втором этапе восстанавливается исходный текст.

Пример кода из `decompress.c`:
```c
int *Decompress1(const char *filename, int *size_dec) {
    // Декодирование файла с использованием словаря
    // ...
}

int **Decompress2(int *in, int size_in, int *index) {
    // Вторичный этап декомпрессии
    // ...
}
```

## Параметры и ограничения

Программа использует следующие параметры для работы:

```c
#define SIZE_DICTIONARY 100000   // Максимальное количество записей в словаре
#define SIZE_OUT 1000000         // Максимальный размер выходного буфера
#define SIZE_WORD 100            // Максимальная длина слова в словаре
#define BUFFER_SIZE 8192         // Размер буфера для операций ввода-вывода
```

Эти значения подобраны для достижения оптимального соотношения скорости работы и уровня сжатия. Однако, в зависимости от задачи, их можно изменять для получения других характеристик.

## Заключение

Данная программа демонстрирует эффективность алгоритмов сжатия, основанных на словарных методах, и является мощным инструментом для уменьшения размера текстовых данных. Сжатие в 8 раз и более делает её полезной в самых различных задачах, связанных с хранением и передачей информации.